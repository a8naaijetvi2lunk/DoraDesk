<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DoraDesk</title>
    <link rel="icon" href="./assets/logo.png">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gridstack@10.1.2/dist/gridstack.min.css">

    <script src="https://cdn.jsdelivr.net/npm/gridstack@10.1.2/dist/gridstack-all.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        dark: {
                            900: '#050505',
                            800: '#0a0a0a',
                            700: '#121212',
                            border: '#27272a',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-out forwards',
                        'slide-up': 'slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'blob': 'blob 10s infinite',
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        slideUp: { '0%': { transform: 'translateY(20px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } },
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        }
                    }
                }
            }
        }
    </script>

    <link rel="stylesheet" href="./styles/main.css">
</head>
<body class="bg-dark-900 text-zinc-100 min-h-screen overflow-x-hidden font-sans selection:bg-accent selection:text-white">

    <div class="fixed inset-0 z-[-1] overflow-hidden pointer-events-none">
        <div class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-purple-900/30 rounded-full mix-blend-screen filter blur-[100px] animate-blob"></div>
        <div class="absolute top-[20%] right-[-10%] w-96 h-96 bg-blue-900/30 rounded-full mix-blend-screen filter blur-[100px] animate-blob animation-delay-2000"></div>
        <div class="absolute bottom-[-20%] left-[20%] w-96 h-96 bg-emerald-900/20 rounded-full mix-blend-screen filter blur-[100px] animate-blob animation-delay-4000"></div>
        <div id="bgOverlay" class="absolute inset-0 bg-cover bg-center opacity-0 transition-opacity duration-700 z-[-2]"></div>
        <div id="bgDimmer" class="absolute inset-0 bg-dark-900/80 z-[-1] opacity-0 transition-opacity duration-700"></div>
    </div>

    <div class="max-w-[1920px] mx-auto p-4 md:p-6 lg:p-8 pb-32">

        <header class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4 animate-slide-up">
            <div class="flex items-center gap-3">
                <img src="./assets/logo.png" alt="DoraDesk" class="w-10 h-10 rounded-xl object-cover">
                <div>
                    <h1 class="font-bold text-xl tracking-tight">DoraDesk</h1>
                    <p class="text-xs text-zinc-500 font-mono" id="greeting">Chargement...</p>
                </div>
            </div>

            <div class="flex items-center gap-3 glass-panel rounded-full p-1.5 px-2 shadow-2xl">
                <div class="flex items-center gap-2 px-3 border-r border-white/10">
                    <i class="mdi mdi-clock-outline text-zinc-400"></i>
                    <span id="currentTime" class="font-mono text-sm font-semibold">--:--</span>
                </div>
                <div class="flex items-center gap-2 px-3 border-r border-white/10">
                    <i class="mdi mdi-calendar-blank-outline text-zinc-400"></i>
                    <span id="currentDate" class="text-sm font-medium text-zinc-300">--</span>
                </div>
                <button
                    id="versionIndicator"
                    onclick="UpdaterActions.checkManually()"
                    class="flex items-center gap-2 px-3 hover:bg-white/10 rounded-full py-1.5 transition-all group cursor-pointer relative"
                    title="Cliquer pour vérifier les mises à jour">
                    <i class="mdi mdi-information-outline text-zinc-400 group-hover:text-white"></i>
                    <span id="versionText" class="text-xs font-mono text-zinc-400 group-hover:text-white">v--</span>
                    <span id="updateBadge" class="hidden absolute -top-1 -right-1 w-2 h-2 bg-accent rounded-full animate-pulse ring-2 ring-dark-800"></span>
                </button>
                <button onclick="window.app?.openQuickLaunch()" class="ml-2 flex items-center gap-2 bg-white/5 hover:bg-white/10 border border-white/5 rounded-full py-1.5 px-4 transition-all text-sm text-zinc-300 group">
                    <i class="mdi mdi-magnify group-hover:text-white"></i>
                    <span>Rechercher</span>
                    <kbd class="hidden md:inline-block bg-black/30 px-1.5 rounded text-[10px] font-mono text-zinc-500 border border-white/10">Ctrl K</kbd>
                </button>
            </div>
        </header>

        <div class="grid-stack animate-fade-in"></div>

    </div>

    <div class="fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 animate-slide-up">
        <div class="glass-panel rounded-2xl p-2 flex items-center gap-1 shadow-2xl shadow-black/50 ring-1 ring-white/10">
            <button class="p-3 rounded-xl hover:bg-white/10 text-zinc-400 hover:text-white hover:scale-110 transition-all tooltip-btn relative" onclick="window.app?.openCardManager()" aria-label="Widgets" title="Gérer les widgets">
                <i class="mdi mdi-view-grid-plus text-xl"></i>
            </button>
            <div class="w-px h-8 bg-white/10 mx-1"></div>
            <button class="p-3 rounded-xl hover:bg-white/10 text-zinc-400 hover:text-white hover:scale-110 transition-all relative" onclick="window.app?.openSettings()" aria-label="Paramètres" title="Paramètres">
                <i class="mdi mdi-cog text-xl"></i>
            </button>
            <button class="p-3 rounded-xl hover:bg-white/10 text-zinc-400 hover:text-white hover:scale-110 transition-all relative" onclick="window.app?.saveLayout()" aria-label="Sauvegarder" title="Sauvegarder la disposition">
                <i class="mdi mdi-content-save text-xl"></i>
            </button>
            <button class="p-3 rounded-xl hover:bg-white/10 text-zinc-400 hover:text-white hover:scale-110 transition-all relative" onclick="window.app?.toggleEditMode()" id="editModeBtn" aria-label="Verrouiller" title="Verrouiller/Déverrouiller">
                <i class="mdi mdi-lock-open text-xl"></i>
            </button>
        </div>
    </div>

    <div id="modalOverlay" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[900] hidden opacity-0 transition-opacity duration-200 flex justify-center items-center p-4">
        <div id="modalContent" class="glass-panel w-full max-w-lg rounded-2xl p-6 shadow-2xl transform scale-95 opacity-0 transition-all duration-300 ring-1 ring-white/10"></div>
    </div>

    <div id="searchModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-[1000] hidden flex justify-center items-start pt-[15vh] p-4 transition-opacity duration-200">
        <div class="glass-panel w-full max-w-2xl rounded-xl overflow-hidden shadow-2xl ring-1 ring-white/10 transform scale-95 opacity-0 transition-all duration-200" id="searchBox">
            <div class="flex items-center px-4 border-b border-white/10 py-3">
                <i class="mdi mdi-magnify text-zinc-400 text-xl mr-3"></i>
                <input type="text" id="quickSearch" class="w-full bg-transparent text-lg text-white placeholder-zinc-500 outline-none" placeholder="Rechercher favoris, commandes ou Google..." autocomplete="off">
                <kbd class="bg-white/5 px-2 py-1 rounded text-xs text-zinc-500 border border-white/10">ÉCHAP</kbd>
            </div>
            <div id="searchResults" class="max-h-[60vh] overflow-y-auto p-2 space-y-1"></div>
        </div>
    </div>

    <script type="module" src="./js/main.js"></script>
</body>
</html>
